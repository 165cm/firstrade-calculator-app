# 【無料】自分のWebサービスにAIチャットサポートを追加する方法

こんにちは！ぱぱぞんです。

今回は、FirstScopeに追加した **AIチャットサポート機能** の作り方をご紹介します。

---

## なぜ作ったの？

FirstScopeを使ってくれるユーザーさんから、よくこんな質問をいただきます：

- 「CSVはどこからダウンロードするの？」
- 「ライセンスの有効期限は？」
- 「為替レートはどこのデータ？」

毎回手動で回答するのは大変...
かといって、外部のチャットサービスは月額費用がかかる...

**そこで、Google の Gemini AI を使って自前のチャットサポートを作りました！**

---

## 完成イメージ

![チャット画面](画像のURL)

- 画面右下にチャットボタンが常に表示
- クリックするとチャットウィンドウが開く
- AIが自動で回答してくれる
- 解決しなければ問い合わせフォームへ誘導

---

## かかる費用は？

**ほぼ無料です！**

Google の Gemini AI には無料枠があり、小〜中規模のサービスなら十分まかなえます。

| 項目         | 無料枠                    |
| ------------ | ------------------------- |
| リクエスト数 | 1分に15回まで             |
| 料金         | 100万トークンあたり約15円 |

月に1000回チャットしても **数百円程度** です。

---

## 必要なもの

1. **Next.js** で作られたWebサイト
2. **Gemini API キー**（無料で取得可能）
3. 30分くらいの作業時間

---

## 作り方（ざっくり）

### ステップ1: APIキーを取得

[Google AI Studio](https://aistudio.google.com/app/apikey) でAPIキーを作成します。

Googleアカウントがあれば、1分で取得できます。

### ステップ2: ライブラリをインストール

ターミナルで以下を実行：

```
npm install @google/generative-ai
```

### ステップ3: コードを追加

技術的な詳細は [Zennの記事](https://zenn.dev/dev_kirin) で解説していますが、大まかには：

1. **APIルート** を作成（AIと通信する窓口）
2. **チャットコンポーネント** を作成（見た目の部分）
3. **ページに組み込み**

### ステップ4: セキュリティ対策

悪意のある人にAPIを叩かれないよう、以下の対策を入れました：

- 1分に5回までの制限
- 1メッセージ500文字まで
- 自分のサイトからのリクエストのみ許可

---

## 工夫したポイント

### 1. 5回で区切る

AIとの会話が5往復を超えたら、自動で「問い合わせフォームへどうぞ」と案内します。

これにより：
- ユーザーの「延々と質問し続ける」を防止
- 本当に困っている人は人間が対応できる
- API利用料の節約

### 2. 会話を要約してコピー

5回会話した後、これまでの質問を自動で要約します。

ユーザーはワンクリックでコピーして、問い合わせフォームに貼り付けられます。

### 3. AIの人格設定

「税務アドバイスはできません」「公式ツールではありません」など、答えてはいけないことを事前に設定しています。

---

## 実際に使ってみてください

[FirstScope](https://firstrade.nomadkazoku.com/) にアクセスして、右下のチャットボタンを押してみてください！

何か質問すると、AIが答えてくれます。

---

## 技術的な詳細は Zenn で

エンジニア向けの詳しい実装解説は、Zennの記事で公開しています：

👉 [Next.js + Gemini AI で簡易チャットサポートを実装する](https://zenn.dev/dev_kirin)

コードのコピペで使える内容になっています。

---

## まとめ

- 外部サービスを使わずにAIチャットを実装
- Gemini AI の無料枠でほぼタダ
- セキュリティ対策も万全

自分のWebサービスにAI機能を追加したい方の参考になれば嬉しいです！

---

いいなと思ったら、ぜひ「スキ」をお願いします 👍
